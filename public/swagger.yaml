openapi: 3.0.0
info:
  title: To-Do List API
  description: API para gerenciamento de tarefas, projetos, configurações e usuários
  version: 1.0.0
servers:
  - url: http://localhost:3000
    description: Servidor de desenvolvimento
  - url: https://api.seudominio.com
    description: Servidor de produção
components:
  securitySchemes:
    cookieAuth:
      type: apiKey
      in: cookie
      name: session
  schemas:
    Task:
      type: object
      properties:
        id:
          type: integer
          format: int64
        title:
          type: string
        description:
          type: string
        completed:
          type: boolean
          default: false
        dueDate:
          type: string
          format: date-time
        priority:
          type: string
          enum: [low, medium, high]
        projectId:
          type: integer
          nullable: true
        labels:
          type: array
          items:
            type: integer
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
      required:
        - title
    Project:
      type: object
      properties:
        id:
          type: integer
          format: int64
        name:
          type: string
        color:
          type: string
        description:
          type: string
        isFavorite:
          type: boolean
          default: false
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
      required:
        - name
    Label:
      type: object
      properties:
        id:
          type: integer
          format: int64
        name:
          type: string
        color:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
      required:
        - name
    User:
      type: object
      properties:
        id:
          type: integer
          format: int64
        name:
          type: string
        email:
          type: string
          format: email
        bio:
          type: string
        avatar:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
      required:
        - name
        - email
    Settings:
      type: object
      properties:
        theme:
          type: string
          enum: [light, dark, system]
        language:
          type: string
        timezone:
          type: string
        notifications_enabled:
          type: boolean
        pomodoro_work_minutes:
          type: integer
        pomodoro_break_minutes:
          type: integer
        pomodoro_long_break_minutes:
          type: integer
        pomodoro_cycles:
          type: integer
        enable_sound:
          type: boolean
        notification_sound:
          type: string
        pomodoro_sound:
          type: string
        enable_desktop_notifications:
          type: boolean
    Notification:
      type: object
      properties:
        id:
          type: integer
          format: int64
        title:
          type: string
        message:
          type: string
        read:
          type: boolean
        taskId:
          type: integer
          nullable: true
        createdAt:
          type: string
          format: date-time
    Error:
      type: object
      properties:
        error:
          type: string
        message:
          type: string
        statusCode:
          type: integer
security:
  - cookieAuth: []
paths:
  /api/auth/login:
    post:
      tags:
        - Auth
      summary: Login de usuário
      description: Autentica um usuário com email e senha
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
                password:
                  type: string
                  format: password
              required:
                - email
                - password
      responses:
        '200':
          description: Login bem-sucedido
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  user:
                    $ref: '#/components/schemas/User'
        '400':
          description: Dados inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Credenciais inválidas
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /api/auth/register:
    post:
      tags:
        - Auth
      summary: Registro de usuário
      description: Cria uma nova conta de usuário
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                email:
                  type: string
                  format: email
                password:
                  type: string
                  format: password
              required:
                - name
                - email
                - password
      responses:
        '201':
          description: Usuário registrado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  user:
                    $ref: '#/components/schemas/User'
        '400':
          description: Dados inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /api/auth/logout:
    post:
      tags:
        - Auth
      summary: Logout de usuário
      description: Encerra a sessão do usuário
      responses:
        '200':
          description: Logout bem-sucedido
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
  /api/auth/me:
    get:
      tags:
        - Auth
      summary: Obter informações do usuário atual
      description: Retorna os dados do usuário autenticado
      responses:
        '200':
          description: Dados do usuário
          content:
            application/json:
              schema:
                type: object
                properties:
                  user:
                    $ref: '#/components/schemas/User'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
                
  # Rotas para gerenciamento de tarefas
  /api/tasks:
    get:
      tags:
        - Tasks
      summary: Listar todas as tarefas
      description: Retorna todas as tarefas do usuário
      responses:
        '200':
          description: Lista de tarefas
          content:
            application/json:
              schema:
                type: object
                properties:
                  tasks:
                    type: array
                    items:
                      $ref: '#/components/schemas/Task'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
        - Tasks
      summary: Criar nova tarefa
      description: Adiciona uma nova tarefa
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                description:
                  type: string
                dueDate:
                  type: string
                  format: date-time
                priority:
                  type: string
                  enum: [low, medium, high]
                  default: medium
                projectId:
                  type: integer
                  nullable: true
                labels:
                  type: array
                  items:
                    type: integer
              required:
                - title
      responses:
        '201':
          description: Tarefa criada com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  task:
                    $ref: '#/components/schemas/Task'
        '400':
          description: Dados inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  /api/tasks/{id}:
    get:
      tags:
        - Tasks
      summary: Obter tarefa específica
      description: Retorna os detalhes de uma tarefa pelo ID
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Detalhes da tarefa
          content:
            application/json:
              schema:
                type: object
                properties:
                  task:
                    $ref: '#/components/schemas/Task'
        '404':
          description: Tarefa não encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    
    put:
      tags:
        - Tasks
      summary: Atualizar tarefa
      description: Atualiza os dados de uma tarefa existente
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                description:
                  type: string
                dueDate:
                  type: string
                  format: date-time
                priority:
                  type: string
                  enum: [low, medium, high]
                projectId:
                  type: integer
                  nullable: true
                labels:
                  type: array
                  items:
                    type: integer
      responses:
        '200':
          description: Tarefa atualizada com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  task:
                    $ref: '#/components/schemas/Task'
        '400':
          description: Dados inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Tarefa não encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    
    delete:
      tags:
        - Tasks
      summary: Excluir tarefa
      description: Remove uma tarefa existente
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Tarefa excluída com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
        '404':
          description: Tarefa não encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  /api/tasks/inbox:
    get:
      tags:
        - Tasks
      summary: Listar tarefas da caixa de entrada
      description: Retorna todas as tarefas sem projeto associado (inbox)
      responses:
        '200':
          description: Lista de tarefas da caixa de entrada
          content:
            application/json:
              schema:
                type: object
                properties:
                  tasks:
                    type: array
                    items:
                      $ref: '#/components/schemas/Task'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  /api/tasks/today:
    get:
      tags:
        - Tasks
      summary: Listar tarefas de hoje
      description: Retorna todas as tarefas marcadas para hoje
      responses:
        '200':
          description: Lista de tarefas de hoje
          content:
            application/json:
              schema:
                type: object
                properties:
                  tasks:
                    type: array
                    items:
                      $ref: '#/components/schemas/Task'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  /api/tasks/upcoming:
    get:
      tags:
        - Tasks
      summary: Listar tarefas futuras
      description: Retorna todas as tarefas com data futura
      responses:
        '200':
          description: Lista de tarefas futuras
          content:
            application/json:
              schema:
                type: object
                properties:
                  tasks:
                    type: array
                    items:
                      $ref: '#/components/schemas/Task'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  /api/tasks/calendar:
    get:
      tags:
        - Tasks
      summary: Listar tarefas para visualização em calendário
      description: Retorna todas as tarefas com data definida, agrupadas por data
      responses:
        '200':
          description: Lista de tarefas para calendário
          content:
            application/json:
              schema:
                type: object
                properties:
                  tasks:
                    type: object
                    additionalProperties:
                      type: array
                      items:
                        $ref: '#/components/schemas/Task'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  /api/tasks/search:
    get:
      tags:
        - Tasks
      summary: Buscar tarefas
      description: Pesquisa tarefas por texto
      parameters:
        - name: query
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Resultados da busca
          content:
            application/json:
              schema:
                type: object
                properties:
                  tasks:
                    type: array
                    items:
                      $ref: '#/components/schemas/Task'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  /api/tasks/{id}/complete:
    post:
      tags:
        - Tasks
      summary: Completar/descompletar tarefa
      description: Marca uma tarefa como completa ou incompleta
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                completed:
                  type: boolean
              required:
                - completed
      responses:
        '200':
          description: Status da tarefa atualizado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  task:
                    $ref: '#/components/schemas/Task'
        '404':
          description: Tarefa não encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  /api/tasks/{id}/toggle:
    post:
      tags:
        - Tasks
      summary: Alternar status da tarefa
      description: Alterna o status de completo/incompleto da tarefa
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Status da tarefa alterado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  task:
                    $ref: '#/components/schemas/Task'
        '404':
          description: Tarefa não encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  /api/tasks/{id}/labels:
    post:
      tags:
        - Tasks
      summary: Adicionar etiqueta a uma tarefa
      description: Associa uma etiqueta existente a uma tarefa
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                labelId:
                  type: integer
                  format: int64
              required:
                - labelId
      responses:
        '200':
          description: Etiqueta adicionada com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  task:
                    $ref: '#/components/schemas/Task'
        '404':
          description: Tarefa ou etiqueta não encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  /api/tasks/{id}/project:
    post:
      tags:
        - Tasks
      summary: Atribuir projeto a uma tarefa
      description: Associa um projeto existente a uma tarefa
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                projectId:
                  type: integer
                  format: int64
                  nullable: true
              required:
                - projectId
      responses:
        '200':
          description: Projeto atribuído com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  task:
                    $ref: '#/components/schemas/Task'
        '404':
          description: Tarefa ou projeto não encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  # Rotas para Projetos
  /api/projects:
    get:
      tags:
        - Projects
      summary: Listar todos os projetos
      description: Retorna todos os projetos do usuário
      responses:
        '200':
          description: Lista de projetos
          content:
            application/json:
              schema:
                type: object
                properties:
                  projects:
                    type: array
                    items:
                      $ref: '#/components/schemas/Project'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    
    post:
      tags:
        - Projects
      summary: Criar novo projeto
      description: Adiciona um novo projeto
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                color:
                  type: string
                  example: "#FF5733"
                description:
                  type: string
              required:
                - name
      responses:
        '201':
          description: Projeto criado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  project:
                    $ref: '#/components/schemas/Project'
        '400':
          description: Dados inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  /api/projects/{id}:
    get:
      tags:
        - Projects
      summary: Obter projeto específico
      description: Retorna os detalhes de um projeto pelo ID
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Detalhes do projeto
          content:
            application/json:
              schema:
                type: object
                properties:
                  project:
                    $ref: '#/components/schemas/Project'
        '404':
          description: Projeto não encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    
    put:
      tags:
        - Projects
      summary: Atualizar projeto
      description: Atualiza os dados de um projeto existente
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                color:
                  type: string
                  example: "#33FF57"
                description:
                  type: string
      responses:
        '200':
          description: Projeto atualizado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  project:
                    $ref: '#/components/schemas/Project'
        '400':
          description: Dados inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Projeto não encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    
    delete:
      tags:
        - Projects
      summary: Excluir projeto
      description: Remove um projeto existente
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Projeto excluído com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
        '404':
          description: Projeto não encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  /api/projects/{id}/favorite:
    post:
      tags:
        - Projects
      summary: Marcar/desmarcar projeto como favorito
      description: Define o status de favorito de um projeto
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                isFavorite:
                  type: boolean
              required:
                - isFavorite
      responses:
        '200':
          description: Status de favorito atualizado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  project:
                    $ref: '#/components/schemas/Project'
        '404':
          description: Projeto não encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  /api/projects/{id}/tasks:
    get:
      tags:
        - Projects
      summary: Listar tarefas de um projeto
      description: Retorna todas as tarefas associadas a um projeto específico
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Lista de tarefas do projeto
          content:
            application/json:
              schema:
                type: object
                properties:
                  tasks:
                    type: array
                    items:
                      $ref: '#/components/schemas/Task'
        '404':
          description: Projeto não encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  # Rotas para Etiquetas
  /api/labels:
    get:
      tags:
        - Labels
      summary: Listar todas as etiquetas
      description: Retorna todas as etiquetas do usuário
      responses:
        '200':
          description: Lista de etiquetas
          content:
            application/json:
              schema:
                type: object
                properties:
                  labels:
                    type: array
                    items:
                      $ref: '#/components/schemas/Label'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    
    post:
      tags:
        - Labels
      summary: Criar nova etiqueta
      description: Adiciona uma nova etiqueta
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                color:
                  type: string
                  example: "#3366FF"
              required:
                - name
      responses:
        '201':
          description: Etiqueta criada com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  label:
                    $ref: '#/components/schemas/Label'
        '400':
          description: Dados inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  /api/labels/{id}:
    get:
      tags:
        - Labels
      summary: Obter etiqueta específica
      description: Retorna os detalhes de uma etiqueta pelo ID
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Detalhes da etiqueta
          content:
            application/json:
              schema:
                type: object
                properties:
                  label:
                    $ref: '#/components/schemas/Label'
        '404':
          description: Etiqueta não encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    
    put:
      tags:
        - Labels
      summary: Atualizar etiqueta
      description: Atualiza os dados de uma etiqueta existente
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                color:
                  type: string
                  example: "#FF33CC"
      responses:
        '200':
          description: Etiqueta atualizada com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  label:
                    $ref: '#/components/schemas/Label'
        '400':
          description: Dados inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Etiqueta não encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    
    delete:
      tags:
        - Labels
      summary: Excluir etiqueta
      description: Remove uma etiqueta existente
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Etiqueta excluída com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
        '404':
          description: Etiqueta não encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  /api/labels/{id}/tasks:
    get:
      tags:
        - Labels
      summary: Listar tarefas com uma etiqueta específica
      description: Retorna todas as tarefas associadas a uma etiqueta
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Lista de tarefas com a etiqueta
          content:
            application/json:
              schema:
                type: object
                properties:
                  tasks:
                    type: array
                    items:
                      $ref: '#/components/schemas/Task'
        '404':
          description: Etiqueta não encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  # Rotas para Configurações
  /api/settings:
    get:
      tags:
        - Settings
      summary: Obter configurações do usuário
      description: Retorna as configurações do usuário atual
      responses:
        '200':
          description: Configurações do usuário
          content:
            application/json:
              schema:
                type: object
                properties:
                  settings:
                    $ref: '#/components/schemas/Settings'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    
    post:
      tags:
        - Settings
      summary: Atualizar configurações
      description: Atualiza as configurações do usuário
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Settings'
      responses:
        '200':
          description: Configurações atualizadas com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  settings:
                    $ref: '#/components/schemas/Settings'
        '400':
          description: Dados inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  # Rotas para Perfil
  /api/profile:
    put:
      tags:
        - Profile
      summary: Atualizar perfil
      description: Atualiza os dados do perfil do usuário
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                email:
                  type: string
                  format: email
                bio:
                  type: string
      responses:
        '200':
          description: Perfil atualizado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  user:
                    $ref: '#/components/schemas/User'
        '400':
          description: Dados inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  /api/profile/avatar:
    post:
      tags:
        - Profile
      summary: Atualizar avatar
      description: Faz upload de uma nova imagem de perfil
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                avatar:
                  type: string
                  format: binary
              required:
                - avatar
      responses:
        '200':
          description: Avatar atualizado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  user:
                    $ref: '#/components/schemas/User'
        '400':
          description: Arquivo inválido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  # Rotas para Notificações
  /api/notifications:
    get:
      tags:
        - Notifications
      summary: Listar notificações
      description: Retorna todas as notificações do usuário
      responses:
        '200':
          description: Lista de notificações
          content:
            application/json:
              schema:
                type: object
                properties:
                  notifications:
                    type: array
                    items:
                      $ref: '#/components/schemas/Notification'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  /api/notifications/{id}/read:
    post:
      tags:
        - Notifications
      summary: Marcar notificação como lida
      description: Marca uma notificação específica como lida
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Notificação marcada como lida
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  notification:
                    $ref: '#/components/schemas/Notification'
        '404':
          description: Notificação não encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  /api/notifications/tasks:
    get:
      tags:
        - Notifications
      summary: Listar notificações de tarefas
      description: Retorna notificações relacionadas a tarefas
      responses:
        '200':
          description: Lista de notificações de tarefas
          content:
            application/json:
              schema:
                type: object
                properties:
                  notifications:
                    type: array
                    items:
                      $ref: '#/components/schemas/Notification'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  # Rotas para Anexos
  /api/upload:
    post:
      tags:
        - Attachments
      summary: Fazer upload de anexo
      description: Envia um arquivo para ser anexado a uma tarefa
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                taskId:
                  type: integer
                  format: int64
              required:
                - file
                - taskId
      responses:
        '200':
          description: Arquivo enviado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  attachment:
                    type: object
                    properties:
                      id:
                        type: integer
                        format: int64
                      filename:
                        type: string
                      url:
                        type: string
                      taskId:
                        type: integer
                        format: int64
                      createdAt:
                        type: string
                        format: date-time
        '400':
          description: Arquivo inválido ou muito grande
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  /api/attachments/{id}:
    get:
      tags:
        - Attachments
      summary: Obter anexo
      description: Retorna informações sobre um anexo específico
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Informações do anexo
          content:
            application/json:
              schema:
                type: object
                properties:
                  attachment:
                    type: object
                    properties:
                      id:
                        type: integer
                        format: int64
                      filename:
                        type: string
                      url:
                        type: string
                      taskId:
                        type: integer
                        format: int64
                      createdAt:
                        type: string
                        format: date-time
        '404':
          description: Anexo não encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    
    delete:
      tags:
        - Attachments
      summary: Excluir anexo
      description: Remove um anexo existente
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Anexo excluído com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
        '404':
          description: Anexo não encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  # Rotas para Backup
  /api/backup/export:
    get:
      tags:
        - Backup
      summary: Exportar backup
      description: Gera um arquivo de backup com todos os dados do usuário
      responses:
        '200':
          description: Backup gerado com sucesso
          content:
            application/json:
              schema:
                type: string
                format: binary
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  /api/backup/import:
    post:
      tags:
        - Backup
      summary: Importar backup
      description: Restaura os dados a partir de um arquivo de backup
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
              required:
                - file
      responses:
        '200':
          description: Backup importado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
        '400':
          description: Arquivo de backup inválido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  # Rotas para Relatórios
  /api/reports/pdf:
    post:
      tags:
        - Reports
      summary: Gerar relatório PDF
      description: Cria um relatório PDF com estatísticas e tarefas selecionadas
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                startDate:
                  type: string
                  format: date
                endDate:
                  type: string
                  format: date
                includeCompleted:
                  type: boolean
                  default: true
                includeUncompleted:
                  type: boolean
                  default: true
                projectIds:
                  type: array
                  items:
                    type: integer
                    format: int64
                labelIds:
                  type: array
                  items:
                    type: integer
                    format: int64
      responses:
        '200':
          description: Relatório gerado com sucesso
          content:
            application/pdf:
              schema:
                type: string
                format: binary
        '400':
          description: Parâmetros inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  # Rotas para Pomodoro
  /api/pomodoro/log:
    post:
      tags:
        - Pomodoro
      summary: Registrar sessão Pomodoro
      description: Salva um registro de uma sessão de Pomodoro concluída
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                taskId:
                  type: integer
                  format: int64
                duration:
                  type: integer
                  description: Duração em minutos
              required:
                - taskId
                - duration
      responses:
        '200':
          description: Sessão Pomodoro registrada com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  pomodoroSession:
                    type: object
                    properties:
                      id:
                        type: integer
                        format: int64
                      taskId:
                        type: integer
                        format: int64
                      duration:
                        type: integer
                      createdAt:
                        type: string
                        format: date-time
        '400':
          description: Dados inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Não autenticado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error' 